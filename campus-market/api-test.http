### 环境变量
@host = localhost:8080
@contentType = application/json

# 这行留空就行，后面会自动填 token
@token =eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIzIiwiaWF0IjoxNzY0MzQ2ODU3LCJleHAiOjE3NjI2NDM4OTB9.ga2ofrtVe56FlHL7KWSDmPayLvTrDVEGSpgNagT3SxjfAfaECYAAJETKPDaO00-tPUcQXr5lmnFNOwiHVUkV8w

### 一键登录 + 自动提取 token（万能版，兼容所有 Apifox）
POST http://{{host}}/user/login
Content-Type: application/json

{
  "username": "tiamo999",
  "password": "123456"
}

> {%
    // 这是万能写法，所有版本都支持！
    const response = pm.response.json();
    if (response.code === 200 && response.data && response.data.token) {
        pm.environment.set("token", response.data.token);
        client.log("登录成功！token 已保存，长度：" + response.data.token.length);
    } else {
        client.log("登录失败：" + JSON.stringify(response));
    }
%}
### ========================================
### 下面所有接口直接使用 {{token}}，永远不会过期、不会卡死！
### ========================================

### 注册（一般只用一次）
POST http://{{host}}/user/register
Content-Type: {{contentType}}

{
  "username": "newuser2025",
  "password": "123456",
  "nickname": "新用户",
  "phone": "17777777777"
}

### 发布商品 —— 标准写法（推荐！后端大多数都是这种）
POST http://{{host}}/goods/publish
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="dto"
Content-Type: application/json

{
  "title": "【99新】MacBook Pro M3 16+512 低价出",
  "price": 8999,
  "description": "本地自提，当面交易，支持验机，有发票",
  "categoryId": 1
}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="1.jpg"
Content-Type: image/jpeg

< ./test-images/1.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="2.jpg"
Content-Type: image/jpeg

< ./test-images/2.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 获取商品列表
GET http://{{host}}/goods/list?keyword=MacBook

### 我的发布
GET http://{{host}}/goods/my/publish
Authorization: Bearer {{token}}

### 商品详情（替换 1 为实际商品 id）
GET http://{{host}}/goods/detail/1